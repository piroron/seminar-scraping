@title[実習３]

### やりたいこと

集めた情報を保管する。

+++

@title[情報取得]

### （まずは）情報を集める

* 発売日
* ISBN
* 価格
* ページ数

等々。データが無い場合は取得しない。  
（電子書籍の場合、ページ数は存在しない）

+++?image=assets/book-info.PNG&size=auto 90%

@title[取得場所]

Note:
実際にChromeで要素を見せる。
itempropの値で見分けられそう、と伝える

+++

@title[Python例]

* chapter5-1.py

```python
path = "//*[@id=\"cx_contents_block\"]/div/section/div/div[2]/dl/dd"

dds = root.xpath(path)

for dd in dds:
    # 書籍情報を取得する
    item_prop = dd.attrib.get("itemprop")
    if item_prop == "datePublished":
        print("publishDate：" + dd.text)
    elif item_prop == "isbn":
        print("isbn：" + dd.text)
    elif item_prop == "offers":
        # 金額を取得
        pass
```
@[1](XPath指定。dd要素（テーブルのデータ）全部)
@[7](dd要素の属性の「itemprop」属性を取得)
@[8,　10,　12](itemprop属性値で、どのデータか判別)

+++

@title[Pythonの辞書型とは]

### 辞書型
```python
item_prop = dd.attrib.get("itemprop")
```

の部分は、「辞書型」へのアクセスと酷似している。

意味は、「itemprop」というキーを持つ値を取得。

+++

@title[辞書型1]

### 辞書型について

```python
values = {} # values = dict()でも可

values["apple"] = 120
values["orange"] = 100
values["banana"] = 80

price = values["apple"] * 10 + values["orange"] * 5
print(price)
print(values)
```
@[1](辞書の初期化)
@[3-5](辞書へ要素追加)
@[7](要素を取り出して、計算に使用)

Note:
appleやorangeを「キー」
渡しているものを「値」という
+++

@title[辞書型2]

* キーの重複は不可

```python
values = {}

values["apple"] = 120
values["apple"] = 100
```
@[4](appleの値が上書きされる)

+++

@title[辞書型3]

* 値を取り出す

```python
non_value = values.get("mango")
print(non_value)

non_value = values["mango"]
print(non_value)
```
@[1](キーが無くても、エラーにならない)
@[3](キーが無い場合、エラーになる)

@title[辞書型4]

* 全ての値を処理する

```python
values = {}

values["apple"] = 120
values["orange"] = 100
values["banana"] = 80

total = 0

for key, value in values.items():
    print(key + ":" + str(value))
    total += value
print("total:" + str(total))
```
@[9](ループする場合は、.items()を使う)
@[9](キーと値をまとめて取得する)